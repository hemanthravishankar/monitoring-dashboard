version: '3.9'  # âœ… Docker Compose file version

services:
  backend:
    # build:
    #   context: ./backend  # ğŸ”§ Build the backend from this directory
    image: shankar0/project_assignment_backend:1.0.0
    container_name: backend  # ğŸ· Name the backend container
    ports:
      - "5000:5000"  # ğŸŒ Expose backend on localhost:5000
    networks:
      - appnet  # ğŸ”— Connect to the shared network

  frontend:
    # build:
    #   context: ./frontend  # ğŸ”§ Build the frontend from this directory
    image: shankar0/project_assignment_frontend:1.0.0
    container_name: frontend  # ğŸ· Name the frontend container
    ports:
      - "3000:80"  # ğŸŒ Expose frontend on localhost:3000
    depends_on:
      - backend  # ğŸ•— Ensure backend starts before frontend
    environment:
      - BACKEND_BASE_URL=http://backend:5000/metrics  # ğŸŒ Runtime API endpoint for frontend to call backend
    networks:
      - appnet  # ğŸ”— Connect to the same network

networks:
  appnet:
    driver: bridge  # ğŸ›£ Default Docker bridge network for inter-container communication
